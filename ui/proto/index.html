<!--
	*index.html
	*author: Manivannan R
	*project: Speedometer
-->
<html>

<head>

	<script>
		window.nodeRequire = require;
		delete window.require;
		delete window.exports;
		delete window.module;        
	</script>
	<link href="css/speedometer.css" rel="stylesheet" type="text/css" />
	<script src="../node_modules/jquery/dist/jquery.min.js"></script>
	<!-- <script src="../node_modules/jquery-ui/ui/core.js"></script> -->
	<script src="../node_modules/jquery-ui/ui/widget.js"></script>
	<script src="js/speedometer.js"></script>
</head>

<body>

	<button id="mv">move</button>
	<button id="ts">test</button>
	<div class="flex-container">
		<div class="flex-item-left">
			<div id="speedo" />
			<div id="speedlabel" class="extlabel">
				<div class="indlabel"></div>
				<div class="inddescrip">Calories/Minute</div>
			</div>
		</div>
	</div>
	<div class="flex-item-right">
		<div id="resmeter" />
		<div id="reslabel" class="extlabel">
			<div class="indlabel"></div>
			<div class="inddescrip">Resistance</div>
		</div>
	</div>
	</div>
	</div>

	<div id="test"></div>
</body>

<script type="text/javascript">

	var speedprefs = { maxVal: 30, divFact: 1, dangerLevel: 22, gagueLabel: "", noOfSmallDiv: 2, indicatorRadius: 280, indicatorNumbRadius: 200, speedPositionTxtWH: 5 }
	var prefs = { maxVal: 26, divFact: 1, dangerLevel: 22, gagueLabel: "", noOfSmallDiv: 2, indicatorRadius: 280, indicatorNumbRadius: 200, speedPositionTxtWH: 5 };

	var slabel = $(".indlabel", $("#speedlabel"));
	var rlabel = $(".indlabel", $("#reslabel"));

	var resmeter = $("#resmeter").myfunc(prefs);
	var speedmeter = $("#speedo").myfunc(speedprefs);

	var speed = 1;
	var resistance = 1;

	$('#mv').click(function () {
		speed += 5;
		resistance += 1;
		speedmeter.changePosition(speed);
		resmeter.changePosition(resistance);

		$(rlabel).text(resistance);
		$(slabel).text(speed);


	});
	rdown = false;
	sdown = false;
	$('#ts').click(function () {
		setInterval(() => {
			if (rdown) {
				resistance -= 0.21;
			}
			else {
				resistance += 0.21;
			}
			if (sdown) {
				speed -= 0.53;
			}
			else {
				speed += 0.53;
			}

			if (speed > 30) {
				sdown = true;
			}
			if (speed <= 0) {
				sdown = false;
			}

			if (resistance > 25) {
				rdown = true;
			}
			if (resistance <= 0) {
				rdown = false;
			}
			speedmeter.changePosition(speed);
			resmeter.changePosition(resistance);

			$(rlabel).text(Math.round(resistance,0));
			$(slabel).text(Math.round(speed,2));
		}, 250);
	});

	// maxVal              : 180,         /**Max value of the meter*/
	//     divFact             : 10,          /**Division value of the meter*/
	//     dangerLevel         : 120,         /**more than this leval, color will be red*/
	//     initDeg             : -45,         /**reading begins angle*/
	//     maxDeg              : 270,         /**total angle of the meter reading*/
	//     edgeRadius          : 150,         /**radius of the meter circle*/
	//     speedNobeH          : 4,           /**speed nobe height*/
	//     speedoNobeW         : 95,          /**speed nobe width*/
	//     speedoNobeL         : 13,          /**speed nobe left position*/
	//     indicatorRadius     : 125,         /**radius of indicators position*/
	//     indicatorNumbRadius : 90,          /**radius of numbers position*/
	//     speedPositionTxtWH  : 80,          /**speedo-meter current value cont*/
	//     nobW                : 20,          /**indicator nob width*/
	//     nobH                : 4,           /**indicator nob height*/
	//     numbW               : 30,          /**indicator number width*/
	//     numbH               : 16,          /**indicator number height*/
	//     midNobW             : 10,          /**indicator mid nob width*/
	//     midNobH             : 3,           /**indicator mid nob height*/
	//     noOfSmallDiv        : 2,           /**no of small div between main div*/
	//     eventListenerType   : 'change',    /**type of event listener*/
	//     multiplier          : 1,	       /**Center value multiplier e.g. 1 x 1000 RPM*/	
	//     gagueLabel   	: 'km/h'       /**Label on guage Face*/	

</script>

</html>